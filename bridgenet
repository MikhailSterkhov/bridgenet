#!/bin/bash

source .scripts/utils.sh

exec_help() {
  echo ">> Executable subcommands list:"
  echo " > -h, --help, help             |  Print this commands information block."
  echo " > -e, endpoints                |  Build endpoints modules to build. [You can write name of endpoint as 0 parameter]"
  echo " > -a, assemblyEndpoints        |  Configure services modules before build. [You can write name of endpoint as 0 parameter]"
  echo " > -j, jar                      |  Build only maintained project modules."
  echo " > -b, build                    |  Run full build of all modules with endpoints."
  echo ""
  echo ">> Commands usage examples: './$APP <subcommand> <parameters>' or 'sh $APP <subcommand> <parameters>'"
}

case $1 in
    "" | "-h" | "--help" | "help")
        exec_help
        ;;
    "-a" | "assemblyEndpoints")
        source .scripts/config_endpoints.sh "$2"
        ;;
    "-e" | "endpoints")
        source .scripts/build_endpoints.sh "$2"
        source .scripts/config_endpoints.sh "$2"
        ;;
    "-j" | "jar")
        source .scripts/build_project.sh
        ;;
    "-b" | "--build")
        source .scripts/build_project.sh
        source .scripts/build_endpoints.sh "$2"
        source .scripts/config_endpoints.sh "$2"
        ;;
    *)
        echo "$PREF Unknown command: $1"
        exec_help
esac
